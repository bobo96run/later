
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Schedules</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="BunKat">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/docs.css" rel="stylesheet">
    <link href="assets/css/bootstrap-responsive.min.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
    <![endif]-->

  </head>

  <body data-spy="scroll" data-target=".later-sidebar">

    <!-- Navbar
    ================================================== -->
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="./index.html">Later</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="">
                <a href="./getting-started.html">Getting started</a>
              </li>
              <li class="active">
                <a href="./schedules.html">Schedules</a>
              </li>
              <li class="">
                <a href="./time-periods.html">Time periods</a>
              </li>
              <li class="">
                <a href="./modifiers.html">Modifiers</a>
              </li>
              <li class="">
                <a href="./parsers.html">Parsers</a>
              </li>
              <li class="">
                <a href="./occurrences.html">Occurrences</a>
              </li>
              <li class="">
                <a href="./execute.html">Execute</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

<!-- Subhead
================================================== -->
<header class="jumbotron subhead" id="overview">
  <div class="container">
    <h1>Schedules</h1>
    <p class="lead">Understanding how schedules are defined using Later.</p>
  </div>
</header>


  <div class="container">

    <!-- Docs nav
    ================================================== -->
    <div class="row">
      <div class="span3 later-sidebar">
        <ul class="nav nav-list later-sidenav">
          <li><a href="#overview"><i class="icon-chevron-right"></i> Overview</a></li>
          <li><a href="#basic"><i class="icon-chevron-right"></i> Basic</a></li>
          <li><a href="#composite"><i class="icon-chevron-right"></i> Composite</a></li>
          <li><a href="#exceptions"><i class="icon-chevron-right"></i> Exceptions</a></li>
          <li><a href="#complete"><i class="icon-chevron-right"></i> Complete definition</a></li>
           <li><a href="#performance"><i class="icon-chevron-right"></i> Performance</a></li>
        </ul>
      </div>
      <div class="span9">


        <!-- Overview
        ================================================== -->
        <section id="overview">
          <div>
            <h2>Overview</h2>
          </div>
          <p>Schedules in Later are json objects that define a set of time
            periods along with the values that should be considered valid for
            that time period. The combination of a time period with their valid values
            is called a <i>constraint</i>. Later then takes all of the constraints
            that have been defined and finds dates that match all of them.</p>

          <p>Since Later schedules are json objects, they can easily be serialized
            and stored in caches and databases as needed. They are also completely
            deterministic which means a schedule will always produce exactly the same
            valid occurrences. Therefore, occurrences never need to be stored
            as they can always be recalculated from the schedule definition.</p>

          <p>Later includes a set of helpful <a href='./parsers.html'>parsers</a> that makes generating valid
            schedules really easy. There is usually no need to manually create
            the schedule definition yourself, though it is useful to understand how to interpret
            a schedule definition.</p>
        </section>

        <!-- Basic
        ================================================== -->
        <section id="basic">
          <div>
            <h2>Basic schedules</h2>
          </div>
          <p>A basic schedule is a set of time periods along with their valid
            values. A date is only considered valid if it meets all of the
            constraints within a basic schedule. A basic schedule can include
            as many time periods (with or without modifiers) as needed, in any
            order.</p>
<pre>
  // a basic schedule that is valid every day at 10:15am and 10:45am
  var basic = {h: [10], m: [15,45]};
</pre>
          <p>Here we can see a schedule is made up of objects with properties
            that correspond to the various <a href="./time-periods.html">time periods</a>.
            In this case <code>h</code> is the hour time period and <code>m</code>
            is the minute time period. The values to consider valid are always
            stored in an array as the value of the property.</p>

          <br/>
<p><span class="label label-info">Note</span> Basic schedules are only valid as part of a complete
  schedule definition.</p>

        </section>

        <!-- Composite
        ================================================== -->
        <section id="composite">
          <div>
            <h2>Composite schedules</h2>
          </div>
          <p>Multiple basic schedules can be combined into a single composite
            schedule by placing them into an array. A date is considered valid if any of the basic schedules
            are valid (basically an OR of all of the basic schedules). A composite
            schedule can contain as many basic schedules as needed.</p>
<pre>
  // a composite schedule that is valid every day at 10:15am and 10:45am
  // and every day at 5:30pm
  var composite = [
    {h: [10], m: [15,45]},
    {h: [17], m: [30]}
  ];
</pre>
<p><span class="label label-info">Note</span> Composite schedules are only valid as part of a complete
  schedule definition.</p>
        </section>

        <!-- Exceptions
        ================================================== -->
        <section id="exceptions">
          <div>
            <h2>Exception schedules</h2>
          </div>
          <p>An exception schedule is a basic or composite schedule that defines
            when a schedule should be considered invalid. A date is considered
            invalid if any of the basic schedules within an exception schedule
            are valid.</p>
<pre>
  // an exception schedule that makes any date in March as
  // well as any Monday of any month invalid
  var exception = [
    {M: [3]},
    {dw: [2]}
  ];
</pre>
<p><span class="label label-info">Note</span> Exception schedules are only valid as part of a complete
  schedule definition.</p>
        </section>

        <!-- complete
        ================================================== -->
        <section id="complete">
          <div>
            <h2>Complete definition</h2>
          </div>
          <p>A complete definition is a json object that at a minimum contains
            a <code>schedules</code> property that defines a composite schedule
            with at least one basic schedule. Optionally, the definition can
            also include an <code>exceptions</code> property that defines a
            composite exception schedule.</p>
          <br/>
          <p>A valid schedule that fires every 10 minutes. The composite schedule is always
            placed in an object under a property named <code>schedules</code>. Even if
            you only have a basic schedule, the <code>schedules</code> property
            must be an array.</p>
<pre>
  var schedule = {
    schedules:
      [
        {m: [0,10,20,30,40,50]},
      ]
  };
</pre>

          <br/>
          <p>A valid schedule definition that includes exceptions with modifiers. Here we see the composite
            exception schedule is always placed in an object under a property named <code>exceptions</code>.
            Even if you only have a basic exception schedule, the <code>exceptions</code> property
            must be an array.</p>
<pre>
  var schedule = {
    schedules:
      [
        {h: [10], m: [15,45]},
        {h: [17], m: [30]}
      ],
    exceptions:
      [
        {M_a: [3]},
        {dw: [2]}
      ]
  };
</pre>

        </section>

        <!-- performance
        ================================================== -->
        <section id="performance">
          <div>
            <h2>Performance considerations</h2>
          </div>
          <p>While Later has been designed to efficiently calculate occurrences
            for all types and complexities of schedules, there are a few things
            to keep in mind for applications that have particularly high
            performance requirements.</p>
          <ul>
            <li>Basic time periods perform the best. These include years, months,
              days, hours, minutes, and seconds. Calculating ISO week of year is
              particularly expensive.</li>
            <li>Schedules without exceptions perform better than those with
              exceptions. Defining your schedule without the need for exceptions
              will improve performance.</li>
            <li>Use the <code>time</code> time period instead of specifying
              hours and minutes seperately when possible. Reducing the number
              of constraints will generally improve performance.</li>
            <li>Using <code>after</code> and <code>before</code> modifiers to
              eliminate the need for specifying a lot of valid values will
              improve performance, especially when calculating ranges.</li>
          </ul>

        </section>

      </div>
    </div>

  </div>



    <!-- Footer
    ================================================== -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2013 BunKat &nbsp; Later is licensed under the
          <a href="http://opensource.org/licenses/MIT">MIT license</a>.</p>
      </div>
    </footer>



    <!-- Javascript
    ================================================== -->
    <script src="assets/js/jquery-1.10.1.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script>
      // side bar
      setTimeout(function () {
        $('.later-sidenav').affix({
          offset: {
            top: function () { return $(window).width() <= 980 ? 230 : 150 }
          , bottom: 270
          }
        })
      }, 100);
    </script>
  </body>
</html>
